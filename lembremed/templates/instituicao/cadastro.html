<form id="form_instituicao" action="salvar/" method="post" class="form-custom">
    {% csrf_token %}
    {% if instituicao %}
        <input type="hidden" name="cnpj" value="{{ instituicao.cnpj }}">
        <input type="hidden" name="edit" value="1">
        <div class="form-group">
            <label for="cnpj">CNPJ:</label>
            <input type="text" id="cnpj" value="{{ instituicao.cnpj }}" disabled class="form-control">
        </div>
    {% else %}
        <div class="form-group">
            <label for="cnpj">CNPJ:</label>
            <input name="cnpj" type="text" id="cnpj" value="" class="form-control">
        </div>
    {% endif %}
    <div class="form-group">
        <label for="nome">Nome:</label>
        <input name="nome" type="text" id="nome" value="{{ instituicao.nome }}" class="form-control">
    </div>
    <div class="form-group">
        <label for="email">E-mail:</label>
        <input name="email" type="text" id="email" value="{{ usuario.email }}" class="form-control">
    </div>
    <div class="form-group">
        <label for="senha">Senha:</label>
        <input name="senha" type="password" id="senha" value="{{ usuario.senha }}" class="form-control">
    </div>
    <button type="submit" class="btn btn-primary">Salvar</button>
</form>

<script>
    // Troca o submit para enviar no popup
    document.getElementById('form_instituicao').addEventListener('submit', envia_e_recarregar);
</script>
<script>
    $(document).ready(function () {
      // Aplicar máscara de CNPJ
      $('#cnpj').mask('00.000.000/0000-00');
  
      // Evento de submit do formulário
      $('#form_instituicao').on('submit', function () {
        var cnpj = $('#cnpj').val();
        // Remover caracteres não numéricos
        cnpj = cnpj.replace(/\D/g, '');
        // Atualizar o valor do campo com apenas números
        $('#cnpj').val(cnpj);
      });
    });
  </script>
  